<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>éŠ…é‡‘ã¨ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
</head>
<body>
  <div class="container">
    <button id="spinButton">å›ã™</button>
    <div id="result" class="result">éŠ…é‡‘ã¨ï¼Ÿ</div>
    <div id="animation" class="animation"></div>
  </div>
  <script>
    const spinButton = document.getElementById('spinButton');
    const resultDiv = document.getElementById('result');
    const animationDiv = document.getElementById('animation');

    function spinRoulette(options, probabilities) {
      const rnd = Math.random();
      let acc = 0;
      for (let i = 0; i < options.length; i++) {
        acc += probabilities[i];
        if (rnd < acc) return options[i];
      }
      return options[options.length - 1];
    }

    function playAnimation(type) {
      animationDiv.innerHTML = '';
      if (type === 'hit') {
        animationDiv.textContent = 'ğŸ‰ å½“ãŸã‚Šï¼';
        animationDiv.classList.add('hit');
      } else if (type === 'rush') {
        animationDiv.textContent = 'ğŸ’¥ RUSHçªå…¥ï¼';
        animationDiv.classList.add('rush');
      }
      setTimeout(() => {
        animationDiv.classList.remove('hit', 'rush');
        animationDiv.textContent = '';
      }, 2000);
    }

    spinButton.addEventListener('click', () => {
      // åˆå›ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ
      const outcome = spinRoulette(['ç”³ã—ã¾ã™', 'ç”³ã•ãš'], [0.1, 0.9]);
      resultDiv.textContent = `éŠ…é‡‘ã¨${outcome}`;
      if (outcome === 'ç”³ã—ã¾ã™') {
        playAnimation('hit');
        // RUSHåˆ¤å®š
        const rush = spinRoulette([true, false], [1/30, 29/30]);
        if (rush) {
          playAnimation('rush');
          // RUSHãƒ¢ãƒ¼ãƒ‰
          const rushOutcome = spinRoulette(['ç”³ã—ã¾ã™', 'ç”³ã•ãš'], [0.5, 0.5]);
          resultDiv.textContent = `éŠ…é‡‘ã¨${rushOutcome}`;
          if (rushOutcome === 'ç”³ã—ã¾ã™') {
            playAnimation('hit');
          }
        }
      }
    });
  </script>
</body>
</html>
